(function(){"use strict";var e={9738:function(e,t,s){var r=s(3751),o=s(641);const a={id:"app"},n={class:"container px-0",style:{width:"100%"}};function i(e,t,s,r,i,l){const d=(0,o.g2)("Navbar"),u=(0,o.g2)("router-view"),c=(0,o.g2)("Footer");return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.bF)(d),(0,o.Lk)("main",n,[(0,o.bF)(u)]),(0,o.bF)(c)])}var l=s(33),d=s.p+"img/logo.960d34e0.png";const u={class:"navbar navbar-expand-lg navbar-dark bg-primary"},c={class:"container"},m={class:"collapse navbar-collapse",id:"navbarNav"},p={class:"navbar-nav me-auto"},h={class:"nav-item"},g={class:"nav-item"},y={key:0,class:"nav-item"},v={class:"navbar-nav"},k={class:"nav-item"},b={class:"nav-item"},f={key:1,class:"nav-item dropdown"},L={class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown"},w={class:"dropdown-menu dropdown-menu-end"};function E(e,t,s,a,n,i){const E=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("nav",u,[(0,o.Lk)("div",c,[(0,o.bF)(E,{class:"navbar-brand d-flex align-items-center",to:"/"},{default:(0,o.k6)((()=>t[1]||(t[1]=[(0,o.Lk)("img",{src:d,alt:"Singapore Journey Planner",width:"220",class:"logo-image"},null,-1)]))),_:1}),t[10]||(t[10]=(0,o.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav"},[(0,o.Lk)("span",{class:"navbar-toggler-icon"})],-1)),(0,o.Lk)("div",m,[(0,o.Lk)("ul",p,[(0,o.Lk)("li",h,[(0,o.bF)(E,{class:"nav-link",to:"/"},{default:(0,o.k6)((()=>t[2]||(t[2]=[(0,o.eW)("Home")]))),_:1})]),(0,o.Lk)("li",g,[(0,o.bF)(E,{class:"nav-link",to:"/journey-planner"},{default:(0,o.k6)((()=>t[3]||(t[3]=[(0,o.eW)("Journey Planner")]))),_:1})]),e.isAuthenticated?((0,o.uX)(),(0,o.CE)("li",y,[(0,o.bF)(E,{class:"nav-link",to:"/saved-journeys"},{default:(0,o.k6)((()=>t[4]||(t[4]=[(0,o.eW)("Saved Journeys")]))),_:1})])):(0,o.Q3)("",!0)]),(0,o.Lk)("ul",v,[e.isAuthenticated?((0,o.uX)(),(0,o.CE)("li",f,[(0,o.Lk)("a",L,[t[7]||(t[7]=(0,o.Lk)("i",{class:"bi bi-person-circle me-1"},null,-1)),(0,o.eW)(" "+(0,l.v_)(e.user?e.user.email:"Account"),1)]),(0,o.Lk)("ul",w,[(0,o.Lk)("li",null,[(0,o.bF)(E,{class:"dropdown-item",to:"/profile"},{default:(0,o.k6)((()=>t[8]||(t[8]=[(0,o.eW)("Profile")]))),_:1})]),t[9]||(t[9]=(0,o.Lk)("li",null,[(0,o.Lk)("hr",{class:"dropdown-divider"})],-1)),(0,o.Lk)("li",null,[(0,o.Lk)("a",{class:"dropdown-item",href:"#",onClick:t[0]||(t[0]=(0,r.D$)(((...e)=>i.handleLogout&&i.handleLogout(...e)),["prevent"]))},"Logout")])])])):((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.Lk)("li",k,[(0,o.bF)(E,{class:"nav-link",to:"/login"},{default:(0,o.k6)((()=>t[5]||(t[5]=[(0,o.eW)("Login")]))),_:1})]),(0,o.Lk)("li",b,[(0,o.bF)(E,{class:"nav-link",to:"/register"},{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.eW)("Register")]))),_:1})])],64))])])])])}s(4114);var _=s(6278),P={name:"Navbar",computed:{...(0,_.L8)("auth",["isAuthenticated","user"])},methods:{async handleLogout(){try{await this.$store.dispatch("auth/logout"),this.$router.push("/login")}catch(e){console.error("Logout failed:",e)}}}},S=s(6262);const C=(0,S.A)(P,[["render",E],["__scopeId","data-v-2d13c193"]]);var A=C;const R={class:"footer mt-auto py-3 bg-light"},j={class:"container text-center"},x={class:"text-muted"};function I(e,t,s,r,a,n){return(0,o.uX)(),(0,o.CE)("footer",R,[(0,o.Lk)("div",j,[(0,o.Lk)("span",x,"Â© "+(0,l.v_)(n.currentYear)+" NavSmart SG. All rights reserved.",1)])])}var F={name:"Footer",computed:{currentYear(){return(new Date).getFullYear()}}};const T=(0,S.A)(F,[["render",I],["__scopeId","data-v-2186ecb3"]]);var J=T,D={name:"App",components:{Navbar:A,Footer:J},created(){this.$store.dispatch("auth/initAuth")}};const M=(0,S.A)(D,[["render",i]]);var N=M,U=(s(8111),s(3579),s(5220)),O=s.p+"img/hero-image.c276a256.jpg";const $={class:"home"},X={class:"hero-section"},W={class:"hero-content"},B={class:"container-fluid p-0"},V={class:"row align-items-center hero-row"},Q={class:"col-lg-6 hero-text fade-in",style:{"padding-left":"100px"}},G={class:"features-section"},q={class:"container-fluid"},Y={class:"row g-4 features-grid"},K={class:"col-md-4 px-4"},H={class:"feature-card"},z={class:"col-md-4 px-4"},Z={class:"feature-card"},ee={class:"col-md-4 px-4"},te={class:"feature-card"};function se(e,t,s,r,a,n){const i=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",$,[(0,o.Lk)("div",X,[(0,o.Lk)("div",W,[(0,o.Lk)("div",B,[(0,o.Lk)("div",V,[(0,o.Lk)("div",Q,[t[1]||(t[1]=(0,o.Lk)("h1",{class:"hero-title"},"Singapore Journey Planner",-1)),t[2]||(t[2]=(0,o.Lk)("p",{class:"hero-subtitle"},"Your one-stop solution for planning your journeys across Singapore.",-1)),t[3]||(t[3]=(0,o.Lk)("p",{class:"hero-description"},"Find the best routes, estimated travel times, and costs for your journey in Singapore.",-1)),(0,o.bF)(i,{to:"/journey-planner",class:"cta-button"},{default:(0,o.k6)((()=>t[0]||(t[0]=[(0,o.eW)(" Start Planning Your Journey "),(0,o.Lk)("i",{class:"bi bi-arrow-right"},null,-1)]))),_:1})]),t[4]||(t[4]=(0,o.Lk)("div",{class:"col-lg-6 hero-image slide-in-right"},[(0,o.Lk)("div",{class:"image-wrapper"},[(0,o.Lk)("img",{src:O,alt:"Journey Planning Illustration",class:"img-fluid"})])],-1))])])])]),(0,o.Lk)("div",G,[(0,o.Lk)("div",q,[t[17]||(t[17]=(0,o.Lk)("div",{class:"section-header text-center mb-5"},[(0,o.Lk)("h2",{class:"section-title"},"Everything you need for your journey"),(0,o.Lk)("div",{class:"title-underline"})],-1)),(0,o.Lk)("div",Y,[(0,o.Lk)("div",K,[(0,o.Lk)("div",H,[t[6]||(t[6]=(0,o.Lk)("div",{class:"icon-wrapper"},[(0,o.Lk)("i",{class:"bi bi-map"})],-1)),t[7]||(t[7]=(0,o.Lk)("h3",{class:"feature-title"},"Plan Your Journey",-1)),t[8]||(t[8]=(0,o.Lk)("p",{class:"feature-text"},"Get multiple route options with different transport modes, optimized for your preferences.",-1)),(0,o.bF)(i,{to:"/journey-planner",class:"feature-link"},{default:(0,o.k6)((()=>t[5]||(t[5]=[(0,o.eW)(" Plan Now "),(0,o.Lk)("i",{class:"bi bi-arrow-right-short"},null,-1)]))),_:1})])]),(0,o.Lk)("div",z,[(0,o.Lk)("div",Z,[t[10]||(t[10]=(0,o.Lk)("div",{class:"icon-wrapper"},[(0,o.Lk)("i",{class:"bi bi-bookmark-star"})],-1)),t[11]||(t[11]=(0,o.Lk)("h3",{class:"feature-title"},"Save Your Journeys",-1)),t[12]||(t[12]=(0,o.Lk)("p",{class:"feature-text"},"Keep track of your frequently traveled routes and access them with just one click.",-1)),(0,o.bF)(i,{to:"/saved-journeys",class:"feature-link"},{default:(0,o.k6)((()=>t[9]||(t[9]=[(0,o.eW)(" View Saved "),(0,o.Lk)("i",{class:"bi bi-arrow-right-short"},null,-1)]))),_:1})])]),(0,o.Lk)("div",ee,[(0,o.Lk)("div",te,[t[14]||(t[14]=(0,o.Lk)("div",{class:"icon-wrapper"},[(0,o.Lk)("i",{class:"bi bi-person-gear"})],-1)),t[15]||(t[15]=(0,o.Lk)("h3",{class:"feature-title"},"Manage Your Profile",-1)),t[16]||(t[16]=(0,o.Lk)("p",{class:"feature-text"},"Customize your experience by updating your preferences and personal information.",-1)),(0,o.bF)(i,{to:"/profile",class:"feature-link"},{default:(0,o.k6)((()=>t[13]||(t[13]=[(0,o.eW)(" Go to Profile "),(0,o.Lk)("i",{class:"bi bi-arrow-right-short"},null,-1)]))),_:1})])])])]),t[18]||(t[18]=(0,o.Lk)("div",{class:"features-background"},null,-1))])])}var re={name:"Home"};const oe=(0,S.A)(re,[["render",se],["__scopeId","data-v-7e678362"]]);var ae=oe;const ne={class:"login-page"},ie={class:"row justify-content-center width-full margin-top-0"},le={class:"col-md-6 col-lg-5"};function de(e,t,s,r,a,n){const i=(0,o.g2)("login-form");return(0,o.uX)(),(0,o.CE)("div",ne,[(0,o.Lk)("div",ie,[(0,o.Lk)("div",le,[(0,o.bF)(i)])])])}const ue={class:"login-container"},ce={class:"login-form fade-in"},me={class:"form-group mb-4"},pe={class:"input-group input-group-lg hover-effect"},he={class:"form-group mb-4"},ge={class:"input-group input-group-lg hover-effect"},ye=["disabled"],ve={key:0,class:"spinner-border spinner-border-sm me-2"},ke={class:"text-center mt-4 slide-up"},be={key:0,class:"alert alert-danger mt-3 shake"};function fe(e,t,s,a,n,i){const d=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",ue,[(0,o.Lk)("div",ce,[t[9]||(t[9]=(0,o.Lk)("h2",{class:"text-center mb-4"},"Welcome Back",-1)),(0,o.Lk)("form",{onSubmit:t[2]||(t[2]=(0,r.D$)(((...e)=>i.handleLogin&&i.handleLogin(...e)),["prevent"]))},[(0,o.Lk)("div",me,[t[4]||(t[4]=(0,o.Lk)("label",{for:"fullName",class:"form-label"},"Full Name",-1)),(0,o.Lk)("div",pe,[t[3]||(t[3]=(0,o.Lk)("span",{class:"input-group-text border-end-0"},[(0,o.Lk)("i",{class:"bi bi-person"})],-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control border-start-0",id:"fullName","onUpdate:modelValue":t[0]||(t[0]=e=>n.formData.fullName=e),placeholder:"Enter your full name",required:""},null,512),[[r.Jo,n.formData.fullName]])])]),(0,o.Lk)("div",he,[t[6]||(t[6]=(0,o.Lk)("label",{for:"password",class:"form-label"},"Password",-1)),(0,o.Lk)("div",ge,[t[5]||(t[5]=(0,o.Lk)("span",{class:"input-group-text border-end-0"},[(0,o.Lk)("i",{class:"bi bi-lock"})],-1)),(0,o.bo)((0,o.Lk)("input",{type:"password",class:"form-control border-start-0",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>n.formData.password=e),placeholder:"Enter your password",required:""},null,512),[[r.Jo,n.formData.password]])])]),(0,o.Lk)("button",{type:"submit",class:"btn btn-primary btn-lg w-100 mb-3 pulse",disabled:n.loading},[n.loading?((0,o.uX)(),(0,o.CE)("span",ve)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,l.v_)(n.loading?"Logging in...":"Login"),1)],8,ye),(0,o.Lk)("p",ke,[t[8]||(t[8]=(0,o.eW)(" Don't have an account? ")),(0,o.bF)(d,{to:"/register",class:"text-decoration-none fw-bold"},{default:(0,o.k6)((()=>t[7]||(t[7]=[(0,o.eW)("Register")]))),_:1})]),n.error?((0,o.uX)(),(0,o.CE)("div",be,(0,l.v_)(n.error),1)):(0,o.Q3)("",!0)],32)])])}var Le={data(){return{formData:{fullName:"",password:""},loading:!1,error:null}},methods:{async handleLogin(){this.loading=!0,this.error=null;try{await this.$store.dispatch("auth/login",this.formData);const e=this.$route.query.redirect||"/";this.$router.push(e)}catch(e){this.error=e.message||"Invalid credentials. Please try again.",console.error("Login error:",e)}finally{this.loading=!1}}}};const we=(0,S.A)(Le,[["render",fe],["__scopeId","data-v-31d89ce5"]]);var Ee=we,_e={name:"Login",components:{LoginForm:Ee}};const Pe=(0,S.A)(_e,[["render",de],["__scopeId","data-v-285fd434"]]);var Se=Pe;const Ce={class:"register-page"},Ae={class:"row justify-content-center"},Re={class:"col-md-6 col-lg-5"};function je(e,t,s,r,a,n){const i=(0,o.g2)("register-form");return(0,o.uX)(),(0,o.CE)("div",Ce,[(0,o.Lk)("div",Ae,[(0,o.Lk)("div",Re,[(0,o.bF)(i)])])])}const xe={class:"register-container"},Ie={class:"register-form fade-in"},Fe={class:"form-group mb-4"},Te={class:"input-group input-group-lg hover-effect"},Je={class:"form-group mb-4"},De={class:"input-group input-group-lg hover-effect"},Me={class:"form-group mb-4"},Ne={class:"input-group input-group-lg hover-effect"},Ue={class:"form-group mb-4"},Oe={class:"input-group input-group-lg hover-effect"},$e=["disabled"],Xe={key:0,class:"spinner-border spinner-border-sm me-2"},We={class:"text-center mt-4 slide-up"},Be={key:0,class:"alert alert-danger mt-3 shake"};function Ve(e,t,s,a,n,i){const d=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",xe,[(0,o.Lk)("div",Ie,[t[15]||(t[15]=(0,o.Lk)("h2",{class:"text-center mb-4"},"Create Account",-1)),(0,o.Lk)("form",{onSubmit:t[4]||(t[4]=(0,r.D$)(((...e)=>i.registerUser&&i.registerUser(...e)),["prevent"]))},[(0,o.Lk)("div",Fe,[t[6]||(t[6]=(0,o.Lk)("label",{for:"fullName",class:"form-label"},"Full Name",-1)),(0,o.Lk)("div",Te,[t[5]||(t[5]=(0,o.Lk)("span",{class:"input-group-text border-end-0"},[(0,o.Lk)("i",{class:"bi bi-person"})],-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control border-start-0",id:"fullName","onUpdate:modelValue":t[0]||(t[0]=e=>n.formData.fullName=e),placeholder:"Enter your full name",required:""},null,512),[[r.Jo,n.formData.fullName]])])]),(0,o.Lk)("div",Je,[t[8]||(t[8]=(0,o.Lk)("label",{for:"email",class:"form-label"},"Email Address",-1)),(0,o.Lk)("div",De,[t[7]||(t[7]=(0,o.Lk)("span",{class:"input-group-text border-end-0"},[(0,o.Lk)("i",{class:"bi bi-envelope"})],-1)),(0,o.bo)((0,o.Lk)("input",{type:"email",class:"form-control border-start-0",id:"email","onUpdate:modelValue":t[1]||(t[1]=e=>n.formData.email=e),placeholder:"Enter your email",required:""},null,512),[[r.Jo,n.formData.email]])])]),(0,o.Lk)("div",Me,[t[10]||(t[10]=(0,o.Lk)("label",{for:"password",class:"form-label"},"Password",-1)),(0,o.Lk)("div",Ne,[t[9]||(t[9]=(0,o.Lk)("span",{class:"input-group-text border-end-0"},[(0,o.Lk)("i",{class:"bi bi-lock"})],-1)),(0,o.bo)((0,o.Lk)("input",{type:"password",class:"form-control border-start-0",id:"password","onUpdate:modelValue":t[2]||(t[2]=e=>n.formData.password=e),placeholder:"Choose a password",required:""},null,512),[[r.Jo,n.formData.password]])])]),(0,o.Lk)("div",Ue,[t[12]||(t[12]=(0,o.Lk)("label",{for:"phone",class:"form-label"},"Phone Number (Optional)",-1)),(0,o.Lk)("div",Oe,[t[11]||(t[11]=(0,o.Lk)("span",{class:"input-group-text border-end-0"},[(0,o.Lk)("i",{class:"bi bi-phone"})],-1)),(0,o.bo)((0,o.Lk)("input",{type:"tel",class:"form-control border-start-0",id:"phone","onUpdate:modelValue":t[3]||(t[3]=e=>n.formData.phone=e),placeholder:"Enter your phone number",pattern:"[0-9]*"},null,512),[[r.Jo,n.formData.phone]])])]),(0,o.Lk)("button",{type:"submit",class:"btn btn-primary btn-lg w-100 mb-3 pulse",disabled:n.isLoading},[n.isLoading?((0,o.uX)(),(0,o.CE)("span",Xe)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,l.v_)(n.isLoading?"Creating Account...":"Register"),1)],8,$e),(0,o.Lk)("p",We,[t[14]||(t[14]=(0,o.eW)(" Already have an account? ")),(0,o.bF)(d,{to:"/login",class:"text-decoration-none fw-bold"},{default:(0,o.k6)((()=>t[13]||(t[13]=[(0,o.eW)("Login")]))),_:1})]),n.error?((0,o.uX)(),(0,o.CE)("div",Be,(0,l.v_)(n.error),1)):(0,o.Q3)("",!0)],32)])])}var Qe={name:"RegisterForm",data(){return{formData:{fullName:"",email:"",password:"",phone:""},isLoading:!1,error:null}},methods:{async registerUser(){this.isLoading=!0,this.error=null;try{await this.$store.dispatch("auth/register",this.formData),this.$router.push({path:"/login",query:{registered:"success"}})}catch(e){console.error("Registration error:",e),this.error=e.message||"Registration failed. Please try again."}finally{this.isLoading=!1}}}};const Ge=(0,S.A)(Qe,[["render",Ve],["__scopeId","data-v-d403f7d4"]]);var qe=Ge,Ye={name:"Register",components:{RegisterForm:qe}};const Ke=(0,S.A)(Ye,[["render",je],["__scopeId","data-v-48b5a861"]]);var He=Ke;const ze={class:"journey-planner"},Ze={class:"planner-content"},et={class:"container-fluid"},tt={class:"row"},st={class:"col-12"},rt={class:"journey-form-card"},ot={key:0,class:"text-center my-5"},at={key:1,class:"alert alert-danger mx-auto mt-4",style:{"max-width":"800px"}},nt={key:2,class:"journey-results fade-in"},it={class:"row g-4"},lt={key:3,class:"map-section fade-in"},dt={class:"map-container"},ut={key:1,class:"map-placeholder"};function ct(e,t,s,r,a,n){const i=(0,o.g2)("JourneyForm"),d=(0,o.g2)("JourneyCard"),u=(0,o.g2)("SimplifiedRouteView");return(0,o.uX)(),(0,o.CE)("div",ze,[t[6]||(t[6]=(0,o.Lk)("div",{class:"planner-header"},[(0,o.Lk)("div",{class:"container-fluid"},[(0,o.Lk)("h1",{class:"text-center mb-2"},"Plan Your Journey"),(0,o.Lk)("p",{class:"text-center text-white"},"Find the best route for your travel across Singapore")])],-1)),(0,o.Lk)("div",Ze,[(0,o.Lk)("div",et,[(0,o.Lk)("div",tt,[(0,o.Lk)("div",st,[(0,o.Lk)("div",rt,[(0,o.bF)(i,{onPlanJourney:n.handleJourneyPlan},null,8,["onPlanJourney"])])])]),a.loading?((0,o.uX)(),(0,o.CE)("div",ot,t[0]||(t[0]=[(0,o.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,o.Lk)("span",{class:"visually-hidden"},"Loading routes...")],-1),(0,o.Lk)("p",{class:"mt-2"},"Getting your journey options...",-1)]))):(0,o.Q3)("",!0),a.error?((0,o.uX)(),(0,o.CE)("div",at,[t[1]||(t[1]=(0,o.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1)),t[2]||(t[2]=(0,o.Lk)("strong",null,"Error:",-1)),(0,o.eW)(" "+(0,l.v_)(a.error),1)])):(0,o.Q3)("",!0),a.journeyResults.length>0?((0,o.uX)(),(0,o.CE)("div",nt,[t[3]||(t[3]=(0,o.Lk)("h2",{class:"text-center mb-4"},"Available Routes",-1)),(0,o.Lk)("div",it,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.journeyResults,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"col-md-4"},[(0,o.bF)(d,{"transport-mode":e.transportMode,"travel-time":e.travelTime,cost:e.cost,emission:e.emission,distance:e.distance,"departure-time":e.departureTime,"arrival-time":e.arrivalTime,steps:e.steps,"route-index":e.routeIndex,onSaveJourney:n.saveJourney,onViewOnMap:t=>n.viewOnMap(e)},null,8,["transport-mode","travel-time","cost","emission","distance","departure-time","arrival-time","steps","route-index","onSaveJourney","onViewOnMap"])])))),128))])])):(0,o.Q3)("",!0),a.showMap?((0,o.uX)(),(0,o.CE)("div",lt,[t[5]||(t[5]=(0,o.Lk)("h2",{class:"text-center mb-4"},"Route Details",-1)),(0,o.Lk)("div",dt,[a.selectedJourney?((0,o.uX)(),(0,o.Wv)(u,{key:0,journey:a.selectedJourney},null,8,["journey"])):((0,o.uX)(),(0,o.CE)("div",ut,t[4]||(t[4]=[(0,o.Lk)("i",{class:"bi bi-map"},null,-1),(0,o.Lk)("p",null,"Select a journey to view route details",-1)])))])])):(0,o.Q3)("",!0)])])])}s(1148),s(1701);const mt={class:"journey-form"},pt={class:"form-row"},ht={class:"location-input"},gt={class:"input-group"},yt={key:0,class:"suggestions-dropdown"},vt=["onMousedown"],kt={class:"location-swap"},bt={class:"location-input"},ft={class:"input-group"},Lt={key:0,class:"suggestions-dropdown"},wt=["onMousedown"],Et=["disabled"],_t={key:0,class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},Pt={key:1,class:"bi bi-search"};function St(e,t,s,a,n,i){return(0,o.uX)(),(0,o.CE)("div",mt,[(0,o.Lk)("form",{onSubmit:t[9]||(t[9]=(0,r.D$)(((...e)=>i.planJourney&&i.planJourney(...e)),["prevent"]))},[(0,o.Lk)("div",pt,[(0,o.Lk)("div",ht,[t[11]||(t[11]=(0,o.Lk)("div",{class:"input-icon"},[(0,o.Lk)("i",{class:"bi bi-geo-alt"})],-1)),(0,o.Lk)("div",gt,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"startPoint","onUpdate:modelValue":t[0]||(t[0]=e=>n.startPoint=e),onInput:t[1]||(t[1]=e=>i.fetchSuggestions("start")),onFocus:t[2]||(t[2]=e=>n.startFocused=!0),onBlur:t[3]||(t[3]=e=>i.handleBlur("start")),class:"form-control",placeholder:"Enter start point",required:""},null,544),[[r.Jo,n.startPoint]]),n.startSuggestions.length&&n.startFocused?((0,o.uX)(),(0,o.CE)("div",yt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.startSuggestions,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:"suggestion-item",onMousedown:t=>i.selectStart(e)},[t[10]||(t[10]=(0,o.Lk)("i",{class:"bi bi-pin-map"},null,-1)),(0,o.eW)(" "+(0,l.v_)(e),1)],40,vt)))),128))])):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",kt,[(0,o.Lk)("button",{type:"button",class:"swap-btn",onClick:t[4]||(t[4]=(...e)=>i.swapLocations&&i.swapLocations(...e)),title:"Swap locations"},t[12]||(t[12]=[(0,o.Lk)("i",{class:"bi bi-arrow-down-up"},null,-1)]))]),(0,o.Lk)("div",bt,[t[14]||(t[14]=(0,o.Lk)("div",{class:"input-icon"},[(0,o.Lk)("i",{class:"bi bi-geo"})],-1)),(0,o.Lk)("div",ft,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"endPoint","onUpdate:modelValue":t[5]||(t[5]=e=>n.endPoint=e),onInput:t[6]||(t[6]=e=>i.fetchSuggestions("end")),onFocus:t[7]||(t[7]=e=>n.endFocused=!0),onBlur:t[8]||(t[8]=e=>i.handleBlur("end")),class:"form-control",placeholder:"Enter destination",required:""},null,544),[[r.Jo,n.endPoint]]),n.endSuggestions.length&&n.endFocused?((0,o.uX)(),(0,o.CE)("div",Lt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.endSuggestions,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:"suggestion-item",onMousedown:t=>i.selectEnd(e)},[t[13]||(t[13]=(0,o.Lk)("i",{class:"bi bi-pin-map"},null,-1)),(0,o.eW)(" "+(0,l.v_)(e),1)],40,wt)))),128))])):(0,o.Q3)("",!0)])]),(0,o.Lk)("button",{type:"submit",class:"search-btn",disabled:n.loading},[n.loading?((0,o.uX)(),(0,o.CE)("span",_t)):((0,o.uX)(),(0,o.CE)("i",Pt)),t[15]||(t[15]=(0,o.Lk)("span",null,"Find Routes",-1))],8,Et)])],32)])}var Ct=s(4335);const At="http://localhost:5004",Rt="http://localhost:5031",jt=async(e,t,s="adult",r=!0)=>{try{console.log(`Calling plan_journey API with origin: ${e}, destination: ${t}`);const o=await Ct.A.get(`${Rt}/plan_journey`,{params:{origin:e,destination:t,peakHour:r,passengerType:s}});return o.data}catch(o){throw console.error("Error planning journey:",o),o}},xt=async e=>{try{const t=await Ct.A.post(`${At}/routes/save`,e);return t.data}catch(t){throw console.error("Error saving journey:",t),t}},It=async e=>{if(console.log("Fetching journeys for user ID:",e),!e)throw console.error("Missing userId in getSavedJourneys call"),new Error("User ID is required");try{const t=await Ct.A.get(`http://localhost:5301/selectedroute/user/${e}`,{timeout:1e4,headers:{Accept:"application/json","Content-Type":"application/json"}});return t.data}catch(t){throw console.error("Error fetching saved journeys:",t),t}};var Ft={data(){return{startPoint:"",endPoint:"",startSuggestions:[],endSuggestions:[],startFocused:!1,endFocused:!1,loading:!1}},methods:{fetchSuggestions(e){const t="start"===e?this.startPoint:this.endPoint;t.length<2?this["start"===e?"startSuggestions":"endSuggestions"]=[]:this["start"===e?"startSuggestions":"endSuggestions"]=this.getMockSuggestions(t)},getMockSuggestions(e){const t=["Marina Bay Sands","Orchard Road","Changi Airport","Sentosa","Bugis","Clarke Quay","Jurong East","Tampines Mall","VivoCity"];return t.filter((t=>t.toLowerCase().includes(e.toLowerCase()))).slice(0,5)},selectStart(e){this.startPoint=e,this.startSuggestions=[]},selectEnd(e){this.endPoint=e,this.endSuggestions=[]},handleBlur(e){setTimeout((()=>{"start"===e?this.startFocused=!1:this.endFocused=!1}),200)},swapLocations(){[this.startPoint,this.endPoint]=[this.endPoint,this.startPoint]},async planJourney(){if(this.startPoint&&this.endPoint){this.loading=!0;try{const e=await jt(this.startPoint,this.endPoint);console.log("Journey planning response:",e),localStorage.setItem("lastApiResponse",JSON.stringify(e)),this.$emit("plan-journey",{startPoint:this.startPoint,endPoint:this.endPoint,journeyResponse:e})}catch(e){console.error("Error planning journey:",e),e.response&&e.response.data&&(console.log("API error response:",e.response.data),localStorage.setItem("lastApiError",JSON.stringify(e.response.data))),alert(`Failed to plan journey: ${e.message||"Unknown error"}`)}finally{this.loading=!1}}else alert("Please enter both start point and destination")}}};const Tt=(0,S.A)(Ft,[["render",St],["__scopeId","data-v-53a38e69"]]);var Jt=Tt;const Dt={class:"journey-card"},Mt={class:"card h-100 shadow-sm"},Nt={class:"d-flex justify-content-between align-items-center"},Ut={class:"mb-0"},Ot={class:"transport-icon"},$t={class:"card-body"},Xt={class:"journey-details"},Wt={class:"journey-time mb-3"},Bt={class:"d-flex justify-content-between"},Vt={key:0},Qt={class:"text-muted"},Gt={key:0,class:"mt-1"},qt={class:"text-muted"},Yt={class:"journey-cost mb-3"},Kt={key:0,class:"journey-emissions mb-3"},Ht={class:"emission-indicator mt-1"},zt={class:"progress",style:{height:"6px"}},Zt={key:1,class:"journey-steps"},es={class:"list-unstyled small mt-2"},ts={class:"d-flex align-items-center"},ss={class:"card-footer bg-white border-0"},rs={class:"d-flex justify-content-between"};function os(e,t,s,r,a,n){return(0,o.uX)(),(0,o.CE)("div",Dt,[(0,o.Lk)("div",Mt,[(0,o.Lk)("div",{class:(0,l.C4)(["card-header",n.getTransportClass(s.transportMode)])},[(0,o.Lk)("div",Nt,[(0,o.Lk)("h5",Ut,(0,l.v_)(s.transportMode),1),(0,o.Lk)("span",Ot,[(0,o.Lk)("i",{class:(0,l.C4)(n.getTransportIcon(s.transportMode))},null,2)])])],2),(0,o.Lk)("div",$t,[(0,o.Lk)("div",Xt,[(0,o.Lk)("div",Wt,[(0,o.Lk)("div",Bt,[(0,o.Lk)("div",null,[t[2]||(t[2]=(0,o.Lk)("strong",null,"Travel Time:",-1)),(0,o.eW)(" "+(0,l.v_)(s.travelTime)+" mins ",1)]),s.departureTime&&s.arrivalTime?((0,o.uX)(),(0,o.CE)("div",Vt,[(0,o.Lk)("small",Qt,(0,l.v_)(s.departureTime)+" - "+(0,l.v_)(s.arrivalTime),1)])):(0,o.Q3)("",!0)]),s.distance?((0,o.uX)(),(0,o.CE)("div",Gt,[(0,o.Lk)("small",qt,"Distance: "+(0,l.v_)(s.distance),1)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Yt,[t[3]||(t[3]=(0,o.Lk)("strong",null,"Cost:",-1)),(0,o.eW)(" $"+(0,l.v_)(parseFloat(s.cost).toFixed(2)),1)]),s.emission?((0,o.uX)(),(0,o.CE)("div",Kt,[t[4]||(t[4]=(0,o.Lk)("strong",null,"COâ Emission:",-1)),(0,o.eW)(" "+(0,l.v_)(s.emission)+" kg ",1),(0,o.Lk)("div",Ht,[(0,o.Lk)("div",zt,[(0,o.Lk)("div",{class:(0,l.C4)(["progress-bar",n.getEmissionClass(s.emission)]),role:"progressbar",style:(0,l.Tr)({width:n.getEmissionIndicator(s.emission)+"%"})},null,6)])])])):(0,o.Q3)("",!0),s.steps&&s.steps.length?((0,o.uX)(),(0,o.CE)("div",Zt,[t[5]||(t[5]=(0,o.Lk)("strong",null,"Key Steps:",-1)),(0,o.Lk)("ul",es,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.formatSteps(s.steps),((e,t)=>((0,o.uX)(),(0,o.CE)("li",{key:t,class:"mb-1"},[(0,o.Lk)("div",ts,[(0,o.Lk)("i",{class:(0,l.C4)([n.getStepIcon(e.text),"me-1"])},null,2),(0,o.Lk)("span",null,(0,l.v_)(e.text),1),e.busLoad?((0,o.uX)(),(0,o.CE)("span",{key:0,class:(0,l.C4)([n.getBusLoadClass(e.busLoad),"ms-2 px-1 small rounded"])},(0,l.v_)(e.busLoad),3)):(0,o.Q3)("",!0)])])))),128))])])):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",ss,[(0,o.Lk)("div",rs,[(0,o.Lk)("button",{class:"btn btn-outline-primary btn-sm",onClick:t[0]||(t[0]=(...e)=>n.viewOnMap&&n.viewOnMap(...e)),title:"View this route on the map"},t[6]||(t[6]=[(0,o.Lk)("i",{class:"bi bi-map"},null,-1),(0,o.eW)(" View Map ")])),(0,o.Lk)("button",{class:"btn btn-outline-success btn-sm",onClick:t[1]||(t[1]=(...e)=>n.handleSave&&n.handleSave(...e)),title:"Save this route to your favorites"},t[7]||(t[7]=[(0,o.Lk)("i",{class:"bi bi-bookmark-plus"},null,-1),(0,o.eW)(" Save ")]))])])])])}var as={props:{transportMode:{type:String,required:!0},travelTime:{type:Number,required:!0},cost:{type:[Number,String],required:!0},emission:{type:[Number,String],default:0},distance:{type:String,default:""},departureTime:{type:String,default:""},arrivalTime:{type:String,default:""},steps:{type:Array,default:()=>[]},routeIndex:{type:Number,default:0}},methods:{getTransportClass(e){const t={Bus:"bg-primary text-white",MRT:"bg-success text-white",Walking:"bg-info text-white",Taxi:"bg-warning text-dark",Mixed:"bg-secondary text-white"};return t[e]||"bg-secondary text-white"},getTransportIcon(e){const t={Bus:"bi bi-bus-front",MRT:"bi bi-train-front",Walking:"bi bi-person-walking",Taxi:"bi bi-taxi-front",Mixed:"bi bi-arrow-repeat"};return t[e]||"bi bi-signpost-2"},getStepIcon(e){return e.includes("Bus")?"bi bi-bus-front":e.includes("MRT")||e.includes("train")?"bi bi-train-front":e.includes("Walk")?"bi bi-person-walking":"bi bi-arrow-right"},formatSteps(e){const t=[];for(const s of e)if("TRANSIT"===s.travel_mode){const e=s.transit_details;if(e){const r=e.line?.vehicle?.name||"Transit",o=e.line?.short_name||e.line?.name||"",a=e.num_stops||0;let n=`${r} ${o} (${a} stops)`,i=null;"Bus"===r&&s.bus_load_description&&(i=s.bus_load_description),t.push({text:n,busLoad:i})}}else"WALKING"===s.travel_mode&&s.distance&&s.distance.value>100&&t.push({text:`Walk ${s.distance.text}`,busLoad:null});return t.slice(0,3)},getBusLoadClass(e){return"Seats Available"===e?"bg-success text-white":"Standing Available"===e?"bg-warning text-dark":"Limited Standing"===e?"bg-danger text-white":"bg-secondary text-white"},getEmissionIndicator(e){const t=5;return Math.min(parseFloat(e)/t*100,100)},getEmissionClass(e){const t=parseFloat(e);return t<1?"bg-success":t<2?"bg-info":t<3?"bg-warning":"bg-danger"},handleSave(){this.$emit("save-journey",{transportMode:this.transportMode,travelTime:this.travelTime,cost:this.cost,emission:this.emission,routeIndex:this.routeIndex})},viewOnMap(){this.$emit("view-on-map",{transportMode:this.transportMode,travelTime:this.travelTime,cost:this.cost,emission:this.emission,routeIndex:this.routeIndex,steps:this.steps})}}};const ns=(0,S.A)(as,[["render",os],["__scopeId","data-v-395b490c"]]);var is=ns;const ls={class:"simplified-route-view"},ds={class:"route-header"},us={class:"route-stats"},cs={class:"stat-item"},ms={class:"stat-item"},ps={key:0,class:"stat-item"},hs={key:1,class:"stat-item"},gs={class:"route-timeline"},ys={class:"start-point"},vs={class:"point-content"},ks={class:"label"},bs={key:0,class:"time"},fs={class:"steps"},Ls={class:"step-content"},ws={class:"step-details"},Es={key:0,class:"step-line"},_s={class:"end-point"},Ps={class:"point-content"},Ss={class:"label"},Cs={key:0,class:"time"};function As(e,t,s,r,a,n){return(0,o.uX)(),(0,o.CE)("div",ls,[(0,o.Lk)("div",ds,[(0,o.Lk)("h4",null,(0,l.v_)(s.journey.transportMode)+" Route",1),(0,o.Lk)("div",us,[(0,o.Lk)("div",cs,[t[0]||(t[0]=(0,o.Lk)("i",{class:"bi bi-clock"},null,-1)),(0,o.Lk)("span",null,(0,l.v_)(s.journey.travelTime)+" mins",1)]),(0,o.Lk)("div",ms,[t[1]||(t[1]=(0,o.Lk)("i",{class:"bi bi-cash"},null,-1)),(0,o.Lk)("span",null,"$"+(0,l.v_)(n.formattedCost),1)]),s.journey.distance?((0,o.uX)(),(0,o.CE)("div",ps,[t[2]||(t[2]=(0,o.Lk)("i",{class:"bi bi-signpost"},null,-1)),(0,o.Lk)("span",null,(0,l.v_)(s.journey.distance),1)])):(0,o.Q3)("",!0),s.journey.emission?((0,o.uX)(),(0,o.CE)("div",hs,[t[3]||(t[3]=(0,o.Lk)("i",{class:"bi bi-tree"},null,-1)),(0,o.Lk)("span",null,(0,l.v_)(s.journey.emission)+" kg COâ",1)])):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",gs,[(0,o.Lk)("div",ys,[t[5]||(t[5]=(0,o.Lk)("div",{class:"point"},null,-1)),(0,o.Lk)("div",vs,[(0,o.Lk)("div",ks,(0,l.v_)(s.journey.startPoint),1),s.journey.departureTime?((0,o.uX)(),(0,o.CE)("div",bs,[t[4]||(t[4]=(0,o.Lk)("i",{class:"bi bi-clock me-1"},null,-1)),(0,o.eW)((0,l.v_)(s.journey.departureTime),1)])):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",fs,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.formattedSteps,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"step"},[(0,o.Lk)("div",{class:(0,l.C4)(["step-icon",n.getStepIconClass(e)])},[(0,o.Lk)("i",{class:(0,l.C4)(n.getStepIcon(e))},null,2)],2),(0,o.Lk)("div",Ls,[(0,o.Lk)("div",ws,(0,l.v_)(e),1),t<n.formattedSteps.length-1?((0,o.uX)(),(0,o.CE)("div",Es)):(0,o.Q3)("",!0)])])))),128))]),(0,o.Lk)("div",_s,[t[7]||(t[7]=(0,o.Lk)("div",{class:"point"},null,-1)),(0,o.Lk)("div",Ps,[(0,o.Lk)("div",Ss,(0,l.v_)(s.journey.endPoint),1),s.journey.arrivalTime?((0,o.uX)(),(0,o.CE)("div",Cs,[t[6]||(t[6]=(0,o.Lk)("i",{class:"bi bi-clock me-1"},null,-1)),(0,o.eW)((0,l.v_)(s.journey.arrivalTime),1)])):(0,o.Q3)("",!0)])])])])}var Rs={props:{journey:{type:Object,required:!0}},computed:{formattedSteps(){return this.journey.steps&&this.journey.steps.length?this.formatSteps(this.journey.steps):["Direct route - No detailed steps available"]},formattedCost(){try{if(console.log("Journey object:",this.journey),this.journey.fareCosts&&this.journey.fareCosts.all_routes&&Array.isArray(this.journey.fareCosts.all_routes)){console.log("Found fareCosts.all_routes:",this.journey.fareCosts.all_routes);const e=void 0!==this.journey.routeIndex?this.journey.routeIndex:0;if(console.log("Using route index:",e),this.journey.fareCosts.all_routes[e]){const t=this.journey.fareCosts.all_routes[e].total_fare;return console.log("Found total_fare:",t),(parseFloat(t)/100).toFixed(2)}}if(this.journey.journeyResponse&&this.journey.journeyResponse.fareCosts&&this.journey.journeyResponse.fareCosts.all_routes){console.log("Found in journeyResponse:",this.journey.journeyResponse.fareCosts.all_routes);const e=void 0!==this.journey.routeIndex?this.journey.routeIndex:0;if(this.journey.journeyResponse.fareCosts.all_routes[e]){const t=this.journey.journeyResponse.fareCosts.all_routes[e].total_fare;return console.log("Found total_fare in journeyResponse:",t),(parseFloat(t)/100).toFixed(2)}}return void 0!==this.journey.cost?(console.log("Using direct cost:",this.journey.cost),(parseFloat(this.journey.cost)/100).toFixed(2)):(console.log("No fare data found, using default 0.00"),"0.00")}catch(e){return console.error("Error calculating fare:",e),"0.00"}}},methods:{formatSteps(e){const t=[];for(const s of e)if("TRANSIT"===s.travel_mode){const e=s.transit_details;if(e){const r=e.line?.vehicle?.name||"Transit",o="Subway"===r?"MRT":r,a=e.line?.short_name||e.line?.name||"",n=e.num_stops||0,i=s.duration?` (${Math.round(s.duration.value/60)} mins)`:"";t.push(`${o} ${a} - ${n} stops${i}`)}}else if("WALKING"===s.travel_mode&&s.distance&&s.distance.value>100){const e=s.duration?` (${Math.round(s.duration.value/60)} mins)`:"";t.push(`Walk ${s.distance.text}${e}`)}return t.length?t:["Direct route"]},getStepIcon(e){return e.includes("Bus")?"bi bi-bus-front":e.includes("MRT")||e.includes("Subway")||e.includes("train")?"bi bi-train-front":e.includes("Walk")?"bi bi-person-walking":(e.includes("Direct route"),"bi bi-arrow-right")},getStepIconClass(e){return e.includes("Bus")?"bus-icon":e.includes("MRT")||e.includes("Subway")||e.includes("train")?"mrt-icon":e.includes("Walk")?"walk-icon":"default-icon"}}};const js=(0,S.A)(Rs,[["render",As],["__scopeId","data-v-331d9e14"]]);var xs=js,Is={components:{JourneyForm:Jt,JourneyCard:is,SimplifiedRouteView:xs},data(){return{journeyResults:[],showMap:!1,selectedJourney:null,loading:!1,error:null,rawJourneyResponse:null}},computed:{hasGoogleMapsApiKey(){return!0}},methods:{async handleJourneyPlan(e){this.loading=!0,this.error=null,this.journeyResults=[],this.showMap=!1;try{if(console.log("Got journey planning data:",e),this.rawJourneyResponse=e.journeyResponse,this.rawJourneyResponse&&this.rawJourneyResponse.error)throw new Error(this.rawJourneyResponse.error);this.processJourneyResponse(e)}catch(t){console.error("Error handling journey plan:",t),this.error=t.message||"An error occurred while planning your journey"}finally{this.loading=!1}},processJourneyResponse(e){if(localStorage.setItem("lastJourneyResponse",JSON.stringify(this.rawJourneyResponse)),!this.rawJourneyResponse||!this.rawJourneyResponse.directions||!this.rawJourneyResponse.directions.routes)return void(this.error="No route information found in the response");const t=this.rawJourneyResponse.directions.routes,s=this.rawJourneyResponse.fareCosts||{},r=this.rawJourneyResponse.emissions||{},o=this.rawJourneyResponse.busTracking||{};console.log("Processing fare costs:",s),this.journeyResults=t.map(((t,a)=>{const n=t.legs[0],i=Math.round(n.duration.value/60);let l="Mixed";const d=n.steps||[];for(const e of d)if("TRANSIT"===e.travel_mode&&e.transit_details&&e.transit_details.line&&e.transit_details.line.vehicle){l=e.transit_details.line.vehicle.name||"Transit";break}d.every((e=>"WALKING"===e.travel_mode))&&(l="Walking");let u=0;if(s.all_routes&&Array.isArray(s.all_routes)&&s.all_routes[a]){const e=s.all_routes[a].total_fare;void 0!==e&&(u=(parseFloat(e)/100).toFixed(2),console.log(`Route ${a} fare from all_routes:`,e,"formatted to:",u))}else s[`route_${a}`]&&s[`route_${a}`].totalFare?(u=(parseFloat(s[`route_${a}`].totalFare)/100).toFixed(2),console.log(`Route ${a} fare from route_${a}:`,s[`route_${a}`].totalFare,"formatted to:",u)):s.totalFare&&(u=(parseFloat(s.totalFare)/100).toFixed(2),console.log(`Route ${a} using global totalFare:`,s.totalFare,"formatted to:",u));const c=r.routeEmissions&&r.routeEmissions[a]?r.routeEmissions[a].totalEmissions:0,m=d.map((e=>{if("TRANSIT"===e.travel_mode&&e.transit_details&&e.transit_details.line&&e.transit_details.line.vehicle&&"Bus"===e.transit_details.line.vehicle.name){const t=this.findBusLoadInfo(o,e);if(t)return{...e,bus_load:t.load,bus_load_description:this.translateBusLoad(t.load),next_arrival:t.estimatedArrival}}return e}));return{routeIndex:a,transportMode:this.formatTransportMode(l),travelTime:i,cost:u,emission:parseFloat(c).toFixed(2),startPoint:e.startPoint,endPoint:e.endPoint,departureTime:n.departure_time?n.departure_time.text:"",arrivalTime:n.arrival_time?n.arrival_time.text:"",distance:n.distance?n.distance.text:"",steps:m,summary:t.summary||"",routeData:t,fareCosts:s,busTracking:o}}))},findBusLoadInfo(e,t){if(!e.results||!Array.isArray(e.results))return null;const s=t.transit_details.line.short_name||t.transit_details.line.name;t.transit_details.departure_stop.name;for(const r of e.results)if(r.arrival_data&&r.arrival_data.Services)for(const e of r.arrival_data.Services)if(e.ServiceNo===s&&e.NextBus)return{load:e.NextBus.Load,estimatedArrival:e.NextBus.EstimatedArrival};return null},translateBusLoad(e){const t={SEA:"Seats Available",SDA:"Standing Available",LSD:"Limited Standing"};return t[e]||"Unknown"},formatTransportMode(e){const t={BUS:"Bus",HEAVY_RAIL:"MRT",SUBWAY:"MRT",COMMUTER_TRAIN:"MRT",RAIL:"MRT",WALKING:"Walking",Mixed:"Mixed",Transit:"Transit"};return t[e.toUpperCase()]||e},saveJourney(e){const t=this.journeyResults[e.routeIndex];if(!t)return void alert("Error: Could not find journey details to save.");const s={...e,id:Date.now().toString(),savedAt:(new Date).toISOString(),startPoint:t.startPoint,endPoint:t.endPoint,distance:t.distance,departure:t.departureTime,arrival:t.arrivalTime,emission:t.emission,routeName:`${t.transportMode} from ${t.startPoint} to ${t.endPoint}`};this.$store.dispatch("journeys/saveJourney",s),alert("Journey saved successfully!")},viewOnMap(e){this.selectedJourney={...e,startPoint:this.journeyResults[e.routeIndex]?.startPoint||"",endPoint:this.journeyResults[e.routeIndex]?.endPoint||"",routeData:this.journeyResults[e.routeIndex]?.routeData||null,steps:this.journeyResults[e.routeIndex]?.steps||[],fareCosts:this.rawJourneyResponse.fareCosts||{}},this.showMap=!0,setTimeout((()=>{const e=document.querySelector(".map-section");e&&e.scrollIntoView({behavior:"smooth"})}),100)}}};const Fs=(0,S.A)(Is,[["render",ct],["__scopeId","data-v-c50cf922"]]);var Ts=Fs;const Js={class:"container mt-4 mb-5"},Ds={key:0,class:"text-center my-5"},Ms={key:1,class:"alert alert-danger mx-auto mt-4",style:{"max-width":"600px"}},Ns={class:"mt-3"},Us={key:2,class:"text-center mt-5"},Os={class:"empty-state"},$s={key:3},Xs={class:"row"},Ws={class:"card h-100 shadow-sm"},Bs={class:"card-header d-flex justify-content-between align-items-center"},Vs={class:"text-muted"},Qs={class:"card-body"},Gs={class:"card-title"},qs={class:"text-muted"},Ys={class:"list-unstyled"},Ks={key:0},Hs={key:1},zs={class:"card-footer bg-white"},Zs={class:"d-flex justify-content-between"},er=["onClick"],tr=["onClick"],sr={key:4,class:"modal-overlay"},rr={class:"modal-content p-4 bg-white rounded shadow"},or={class:"d-flex justify-content-end"},ar=["disabled"],nr={key:0,class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"};function ir(e,t,s,r,a,n){const i=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",Js,[t[16]||(t[16]=(0,o.Lk)("h1",{class:"text-center mb-4"},"My Saved Journeys",-1)),e.loading?((0,o.uX)(),(0,o.CE)("div",Ds,t[3]||(t[3]=[(0,o.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,o.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,o.Lk)("p",{class:"mt-2"},"Loading your saved journeys...",-1)]))):e.error?((0,o.uX)(),(0,o.CE)("div",Ms,[t[5]||(t[5]=(0,o.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1)),t[6]||(t[6]=(0,o.Lk)("strong",null,"Error:",-1)),(0,o.eW)(" "+(0,l.v_)(e.error)+" ",1),(0,o.Lk)("div",Ns,[(0,o.Lk)("button",{class:"btn btn-sm btn-outline-danger",onClick:t[0]||(t[0]=(...e)=>n.retryFetch&&n.retryFetch(...e))},t[4]||(t[4]=[(0,o.Lk)("i",{class:"bi bi-arrow-clockwise me-1"},null,-1),(0,o.eW)(" Retry ")]))])])):0===e.savedJourneys.length?((0,o.uX)(),(0,o.CE)("div",Us,[(0,o.Lk)("div",Os,[t[8]||(t[8]=(0,o.Lk)("i",{class:"bi bi-bookmark-heart",style:{"font-size":"3rem"}},null,-1)),t[9]||(t[9]=(0,o.Lk)("h3",{class:"mt-3"},"No saved journeys yet",-1)),t[10]||(t[10]=(0,o.Lk)("p",{class:"text-muted"},"Plan and save your first journey to see it here.",-1)),(0,o.bF)(i,{to:"/journey-planner",class:"btn btn-primary mt-3"},{default:(0,o.k6)((()=>t[7]||(t[7]=[(0,o.eW)(" Plan a Journey ")]))),_:1})])])):((0,o.uX)(),(0,o.CE)("div",$s,[(0,o.Lk)("div",Xs,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.savedJourneys,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"col-md-4 mb-4",key:e.id},[(0,o.Lk)("div",Ws,[(0,o.Lk)("div",Bs,[(0,o.Lk)("span",{class:(0,l.C4)(["badge",n.getBadgeClass(e.transportMode)])},(0,l.v_)(e.transportMode),3),(0,o.Lk)("small",Vs,"Route ID: "+(0,l.v_)(e.id),1)]),(0,o.Lk)("div",Qs,[(0,o.Lk)("h5",Gs,"Bus Stop: "+(0,l.v_)(e.startPoint),1),(0,o.Lk)("p",qs,"Bus ID: "+(0,l.v_)(e.endPoint),1),(0,o.Lk)("ul",Ys,[e.travelTime?((0,o.uX)(),(0,o.CE)("li",Ks,[t[11]||(t[11]=(0,o.Lk)("strong",null,"Travel Time:",-1)),(0,o.eW)(" "+(0,l.v_)(e.travelTime)+" mins",1)])):(0,o.Q3)("",!0),e.cost?((0,o.uX)(),(0,o.CE)("li",Hs,[t[12]||(t[12]=(0,o.Lk)("strong",null,"Cost:",-1)),(0,o.eW)(" $"+(0,l.v_)(Number(e.cost).toFixed(2)),1)])):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",zs,[(0,o.Lk)("div",Zs,[(0,o.Lk)("button",{class:"btn btn-sm btn-outline-primary",onClick:t=>n.planSimilar(e)}," Plan Similar ",8,er),(0,o.Lk)("button",{class:"btn btn-sm btn-outline-danger",onClick:t=>n.removeJourney(e.id)}," Remove ",8,tr)])])])])))),128))])])),a.showDeleteConfirmation?((0,o.uX)(),(0,o.CE)("div",sr,[(0,o.Lk)("div",rr,[t[14]||(t[14]=(0,o.Lk)("h4",null,"Confirm Deletion",-1)),t[15]||(t[15]=(0,o.Lk)("p",null,"Are you sure you want to delete this saved journey?",-1)),(0,o.Lk)("div",or,[(0,o.Lk)("button",{class:"btn btn-secondary me-2",onClick:t[1]||(t[1]=(...e)=>n.cancelDelete&&n.cancelDelete(...e))},"Cancel"),(0,o.Lk)("button",{class:"btn btn-danger",disabled:a.deletingJourney,onClick:t[2]||(t[2]=(...e)=>n.confirmDelete&&n.confirmDelete(...e))},[a.deletingJourney?((0,o.uX)(),(0,o.CE)("span",nr)):(0,o.Q3)("",!0),t[13]||(t[13]=(0,o.eW)(" Delete "))],8,ar)])])])):(0,o.Q3)("",!0)])}const lr="http://localhost:5301/selectedroute";var dr={name:"SavedJourneys",data(){return{showDeleteConfirmation:!1,journeyToDelete:null,deletingJourney:!1}},computed:{...(0,_.aH)({loading:e=>e.journeys.loading,error:e=>e.journeys.error}),...(0,_.L8)({savedJourneys:"journeys/allSavedJourneys"})},methods:{formatDate(e){if(!e)return"Unknown date";try{const t=new Date(e);return new Intl.DateTimeFormat("en-SG",{day:"2-digit",month:"short",year:"numeric"}).format(t)}catch(t){return console.error("Date formatting error:",t),"Invalid date"}},getBadgeClass(e){if(!e)return"bg-secondary text-white";switch(e.toLowerCase()){case"mrt":return"bg-primary text-white";case"bus":return"bg-success text-white";case"taxi":return"bg-warning text-dark";default:return"bg-secondary text-white"}},planSimilar(e){this.$router.push({name:"JourneyPlanner",params:{startPoint:e.startPoint,endPoint:e.endPoint}})},removeJourney(e){this.journeyToDelete=e,this.showDeleteConfirmation=!0},async confirmDelete(){this.deletingJourney=!0;try{const e=await fetch(`${lr}/${this.journeyToDelete}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();if(200!==t.code)throw new Error(t.message||"Failed to delete journey");await this.$store.dispatch("journeys/removeJourney",this.journeyToDelete),this.$toast.success("Journey deleted successfully")}catch(e){console.error("Delete error:",e),this.$toast.error(e.message||"Failed to delete journey")}finally{this.showDeleteConfirmation=!1,this.journeyToDelete=null,this.deletingJourney=!1}},cancelDelete(){this.showDeleteConfirmation=!1,this.journeyToDelete=null},retryFetch(){this.fetchSavedJourneys()},fetchSavedJourneys(){this.$store.dispatch("journeys/fetchSavedJourneys")}},mounted(){this.fetchSavedJourneys()}};const ur=(0,S.A)(dr,[["render",ir],["__scopeId","data-v-09668cce"]]);var cr=ur;const mr={class:"container"},pr={class:"row"},hr={class:"col-md-8 mx-auto"},gr={key:0,class:"text-center my-5"},yr={key:1,class:"alert alert-danger",role:"alert"},vr={class:"card shadow"},kr={class:"card-body"},br={class:"row"},fr={class:"col-md-4 text-center"},Lr={class:"avatar-container mb-3"},wr=["src","alt"],Er={class:"col-md-8"},_r={key:0},Pr={class:"row"},Sr={class:"col-sm-9"},Cr={class:"col-sm-9"},Ar={class:"col-sm-9"},Rr={class:"col-sm-9"},jr={key:1},xr={class:"form-group mb-3"},Ir={class:"invalid-feedback"},Fr={class:"form-group mb-3"},Tr={class:"invalid-feedback"},Jr={class:"form-group mb-3"},Dr={class:"invalid-feedback"},Mr={class:"d-flex"},Nr=["disabled"],Ur={key:0,class:"spinner-border spinner-border-sm me-2"},Or=["disabled"],$r={class:"card mt-4 shadow"},Xr={class:"card-body"},Wr={class:"mb-3"},Br=["disabled"],Vr={key:0,class:"spinner-border spinner-border-sm me-2"},Qr={key:0,class:"modal fade show",style:{display:"block"}},Gr={class:"modal-dialog"},qr={class:"modal-content"},Yr={class:"modal-header"},Kr={class:"modal-body"},Hr={class:"mb-3"},zr={class:"mb-3"},Zr={class:"mb-3"},eo={class:"text-end"},to=["disabled"],so={key:0,class:"spinner-border spinner-border-sm me-2"};function ro(e,t,s,a,n,i){return(0,o.uX)(),(0,o.CE)("div",mr,[(0,o.Lk)("div",pr,[(0,o.Lk)("div",hr,[n.loading?((0,o.uX)(),(0,o.CE)("div",gr,t[15]||(t[15]=[(0,o.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,o.Lk)("span",{class:"visually-hidden"},"Loading...")],-1)]))):n.error?((0,o.uX)(),(0,o.CE)("div",yr,(0,l.v_)(n.error),1)):((0,o.uX)(),(0,o.CE)(o.FK,{key:2},[(0,o.Lk)("div",vr,[t[23]||(t[23]=(0,o.Lk)("div",{class:"card-header bg-primary text-white"},[(0,o.Lk)("h2",{class:"mb-0"},"User Profile")],-1)),(0,o.Lk)("div",kr,[(0,o.Lk)("div",br,[(0,o.Lk)("div",fr,[(0,o.Lk)("div",Lr,[(0,o.Lk)("img",{src:i.avatarUrl,alt:e.user.FullName,class:"rounded-circle img-fluid"},null,8,wr)]),(0,o.Lk)("button",{class:"btn btn-sm btn-outline-primary",onClick:t[0]||(t[0]=(...e)=>i.changePhoto&&i.changePhoto(...e)),disabled:""}," Change Photo (Coming Soon) ")]),(0,o.Lk)("div",Er,[n.editMode?((0,o.uX)(),(0,o.CE)("div",jr,[(0,o.Lk)("form",{onSubmit:t[6]||(t[6]=(0,r.D$)(((...e)=>i.saveProfile&&i.saveProfile(...e)),["prevent"]))},[(0,o.Lk)("div",xr,[t[20]||(t[20]=(0,o.Lk)("label",{for:"name"},"Name",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"name",class:(0,l.C4)(["form-control",{"is-invalid":n.validationErrors.FullName}]),"onUpdate:modelValue":t[2]||(t[2]=e=>n.editedUser.FullName=e),required:""},null,2),[[r.Jo,n.editedUser.FullName]]),(0,o.Lk)("div",Ir,(0,l.v_)(n.validationErrors.FullName),1)]),(0,o.Lk)("div",Fr,[t[21]||(t[21]=(0,o.Lk)("label",{for:"email"},"Email",-1)),(0,o.bo)((0,o.Lk)("input",{type:"email",id:"email",class:(0,l.C4)(["form-control",{"is-invalid":n.validationErrors.Email}]),"onUpdate:modelValue":t[3]||(t[3]=e=>n.editedUser.Email=e),required:""},null,2),[[r.Jo,n.editedUser.Email]]),(0,o.Lk)("div",Tr,(0,l.v_)(n.validationErrors.Email),1)]),(0,o.Lk)("div",Jr,[t[22]||(t[22]=(0,o.Lk)("label",{for:"phone"},"Phone",-1)),(0,o.bo)((0,o.Lk)("input",{type:"tel",id:"phone",class:(0,l.C4)(["form-control",{"is-invalid":n.validationErrors.Phone}]),"onUpdate:modelValue":t[4]||(t[4]=e=>n.editedUser.Phone=e)},null,2),[[r.Jo,n.editedUser.Phone]]),(0,o.Lk)("div",Dr,(0,l.v_)(n.validationErrors.Phone),1)]),(0,o.Lk)("div",Mr,[(0,o.Lk)("button",{type:"submit",class:"btn btn-success me-2",disabled:n.updating},[n.updating?((0,o.uX)(),(0,o.CE)("span",Ur)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,l.v_)(n.updating?"Saving...":"Save Changes"),1)],8,Nr),(0,o.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[5]||(t[5]=(...e)=>i.cancelEdit&&i.cancelEdit(...e)),disabled:n.updating},"Cancel",8,Or)])],32)])):((0,o.uX)(),(0,o.CE)("div",_r,[(0,o.Lk)("dl",Pr,[t[16]||(t[16]=(0,o.Lk)("dt",{class:"col-sm-3"},"Name:",-1)),(0,o.Lk)("dd",Sr,(0,l.v_)(e.user.FullName),1),t[17]||(t[17]=(0,o.Lk)("dt",{class:"col-sm-3"},"Email:",-1)),(0,o.Lk)("dd",Cr,(0,l.v_)(e.user.Email),1),t[18]||(t[18]=(0,o.Lk)("dt",{class:"col-sm-3"},"Phone:",-1)),(0,o.Lk)("dd",Ar,(0,l.v_)(e.user.Phone||"Not provided"),1),t[19]||(t[19]=(0,o.Lk)("dt",{class:"col-sm-3"},"Joined:",-1)),(0,o.Lk)("dd",Rr,(0,l.v_)(i.formatDate(e.user.CreatedAt)),1)]),(0,o.Lk)("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>i.toggleEditMode&&i.toggleEditMode(...e))},"Edit Profile")]))])])])]),(0,o.Lk)("div",$r,[t[28]||(t[28]=(0,o.Lk)("div",{class:"card-header bg-warning"},[(0,o.Lk)("h3",{class:"mb-0"},"Account Settings")],-1)),(0,o.Lk)("div",Xr,[(0,o.Lk)("div",Wr,[t[24]||(t[24]=(0,o.Lk)("h5",null,"Change Password",-1)),(0,o.Lk)("button",{class:"btn btn-outline-warning",onClick:t[7]||(t[7]=e=>n.showChangePasswordModal=!0)}," Change Password ")]),t[27]||(t[27]=(0,o.Lk)("hr",null,null,-1)),(0,o.Lk)("div",null,[t[25]||(t[25]=(0,o.Lk)("h5",null,"Delete Account",-1)),t[26]||(t[26]=(0,o.Lk)("p",{class:"text-danger"},"This action is irreversible. All your data will be permanently deleted.",-1)),(0,o.Lk)("button",{class:"btn btn-danger",onClick:t[8]||(t[8]=(...e)=>i.confirmDeleteAccount&&i.confirmDeleteAccount(...e)),disabled:n.deleting},[n.deleting?((0,o.uX)(),(0,o.CE)("span",Vr)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,l.v_)(n.deleting?"Deleting...":"Delete Account"),1)],8,Br)])])])],64))])]),n.showChangePasswordModal?((0,o.uX)(),(0,o.CE)("div",Qr,[(0,o.Lk)("div",Gr,[(0,o.Lk)("div",qr,[(0,o.Lk)("div",Yr,[t[29]||(t[29]=(0,o.Lk)("h5",{class:"modal-title"},"Change Password",-1)),(0,o.Lk)("button",{type:"button",class:"btn-close",onClick:t[9]||(t[9]=(...e)=>i.closePasswordModal&&i.closePasswordModal(...e))})]),(0,o.Lk)("div",Kr,[(0,o.Lk)("form",{onSubmit:t[14]||(t[14]=(0,r.D$)(((...e)=>i.changePassword&&i.changePassword(...e)),["prevent"]))},[(0,o.Lk)("div",Hr,[t[30]||(t[30]=(0,o.Lk)("label",{for:"currentPassword",class:"form-label"},"Current Password",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password",class:"form-control",id:"currentPassword","onUpdate:modelValue":t[10]||(t[10]=e=>n.passwordForm.currentPassword=e),required:""},null,512),[[r.Jo,n.passwordForm.currentPassword]])]),(0,o.Lk)("div",zr,[t[31]||(t[31]=(0,o.Lk)("label",{for:"newPassword",class:"form-label"},"New Password",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password",class:"form-control",id:"newPassword","onUpdate:modelValue":t[11]||(t[11]=e=>n.passwordForm.newPassword=e),required:""},null,512),[[r.Jo,n.passwordForm.newPassword]])]),(0,o.Lk)("div",Zr,[t[32]||(t[32]=(0,o.Lk)("label",{for:"confirmPassword",class:"form-label"},"Confirm New Password",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password",class:"form-control",id:"confirmPassword","onUpdate:modelValue":t[12]||(t[12]=e=>n.passwordForm.confirmPassword=e),required:""},null,512),[[r.Jo,n.passwordForm.confirmPassword]])]),(0,o.Lk)("div",eo,[(0,o.Lk)("button",{type:"button",class:"btn btn-secondary me-2",onClick:t[13]||(t[13]=(...e)=>i.closePasswordModal&&i.closePasswordModal(...e))},"Cancel"),(0,o.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:n.changingPassword},[n.changingPassword?((0,o.uX)(),(0,o.CE)("span",so)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,l.v_)(n.changingPassword?"Changing...":"Change Password"),1)],8,to)])],32)])])]),t[33]||(t[33]=(0,o.Lk)("div",{class:"modal-backdrop fade show"},null,-1))])):(0,o.Q3)("",!0)])}var oo={data(){return{loading:!1,error:null,editMode:!1,editedUser:{},updating:!1,deleting:!1,validationErrors:{},showChangePasswordModal:!1,changingPassword:!1,passwordForm:{currentPassword:"",newPassword:"",confirmPassword:""}}},computed:{...(0,_.aH)("auth",["user"]),userId(){return this.user?.UserId},avatarUrl(){return`https://api.dicebear.com/7.x/initials/svg?seed=${encodeURIComponent(this.user?.FullName||"User")}`}},watch:{user:{immediate:!0,handler(e){e?(this.error=null,this.editedUser={...e}):this.error="Please log in to view your profile."}}},created(){this.user?this.$store.dispatch("auth/checkAuthState"):this.error="Please log in to view your profile."},methods:{formatDate(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"},toggleEditMode(){this.editMode=!this.editMode,this.editMode&&(this.editedUser={...this.user}),this.validationErrors={}},async saveProfile(){this.updating=!0,this.validationErrors={};try{const e=await Ct.A.put(`${{NODE_ENV:"production",VUE_APP_API_BASE_URL:"http://localhost:5004",VUE_APP_GOOGLE_MAPS_API_KEY:"INPUT YOUR GOOGLE MAPS API KEY HERE!!!!!!!",VUE_APP_PLAN_JOURNEY_API:"http://localhost:5031",VUE_APP_SAVED_ROUTES_URL:"http://localhost:5006",VUE_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51R2ZQrJeAtLoMNXrh1LkazlDVgGu6L8hczwYoagQqlMsF09T7Ik6Bmnh6FQ3dP3eFodbia9LjaNCSJLkqAuaXdOU002wziPkG0",BASE_URL:"/singapore-journey-planner/"}.VUE_APP_USER_API_URL||"http://localhost:5201"}/users/${this.userId}`,this.editedUser);if(200!==e.data.code)throw new Error(e.data.message||"Failed to update profile");this.$store.commit("auth/SET_USER",e.data.data),this.editMode=!1}catch(e){console.error("Error updating profile:",e),e.response?.data?.validationErrors?this.validationErrors=e.response.data.validationErrors:this.error=e.response?.data?.message||"Failed to update profile. Please try again."}finally{this.updating=!1}},cancelEdit(){this.editMode=!1,this.editedUser={...this.user},this.validationErrors={}},async confirmDeleteAccount(){if(confirm("Are you sure you want to delete your account? This action cannot be undone.")){this.deleting=!0;try{await Ct.A.delete(`http://localhost:5201/users/${this.userId}`),await this.$store.dispatch("auth/logout"),this.$router.push("/"),this.$toast.success("Your account has been deleted successfully.")}catch(e){console.error("Error deleting account:",e),this.$toast.error("Failed to delete account. Please try again.")}finally{this.deleting=!1}}},async changePassword(){if(this.passwordForm.newPassword===this.passwordForm.confirmPassword){this.changingPassword=!0;try{await Ct.A.post(`http://localhost:5201/users/${this.userId}/change-password`,{currentPassword:this.passwordForm.currentPassword,newPassword:this.passwordForm.newPassword}),this.closePasswordModal(),this.$toast.success("Password changed successfully!")}catch(e){console.error("Error changing password:",e),this.$toast.error(e.response?.data?.message||"Failed to change password. Please try again.")}finally{this.changingPassword=!1}}else this.$toast.error("New passwords do not match.")},closePasswordModal(){this.showChangePasswordModal=!1,this.passwordForm={currentPassword:"",newPassword:"",confirmPassword:""}},changePhoto(){}}};const ao=(0,S.A)(oo,[["render",ro],["__scopeId","data-v-77eb9c26"]]);var no=ao;const io={class:"payment-success-container"},lo={class:"card"},uo={class:"card-body text-center"},co={key:0,class:"transaction-details mb-4"},mo={class:"mb-2"},po={class:"mb-2"},ho={class:"mb-2"};function go(e,t,s,r,a,n){return(0,o.uX)(),(0,o.CE)("div",io,[(0,o.Lk)("div",lo,[(0,o.Lk)("div",uo,[t[4]||(t[4]=(0,o.Lk)("div",{class:"success-icon mb-4"},[(0,o.Lk)("i",{class:"bi bi-check-circle-fill text-success",style:{"font-size":"4rem"}})],-1)),t[5]||(t[5]=(0,o.Lk)("h2",{class:"card-title mb-4"},"Payment Successful!",-1)),t[6]||(t[6]=(0,o.Lk)("p",{class:"card-text mb-4"},"Thank you for your payment. Your transaction has been completed successfully.",-1)),a.paymentIntent?((0,o.uX)(),(0,o.CE)("div",co,[(0,o.Lk)("p",mo,[t[1]||(t[1]=(0,o.Lk)("strong",null,"Transaction ID:",-1)),(0,o.eW)(" "+(0,l.v_)(a.paymentIntent.id),1)]),(0,o.Lk)("p",po,[t[2]||(t[2]=(0,o.Lk)("strong",null,"Amount:",-1)),(0,o.eW)(" $"+(0,l.v_)((a.paymentIntent.amount/100).toFixed(2)),1)]),(0,o.Lk)("p",ho,[t[3]||(t[3]=(0,o.Lk)("strong",null,"Status:",-1)),(0,o.eW)(" "+(0,l.v_)(a.paymentIntent.status),1)])])):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.goHome&&n.goHome(...e)),class:"btn btn-primary"}," Return to Home ")])])])}var yo={name:"PaymentSuccess",data(){return{paymentIntent:null}},created(){this.$route.state?.paymentIntent&&(this.paymentIntent=this.$route.state.paymentIntent)},methods:{goHome(){this.$router.push("/")}}};const vo=(0,S.A)(yo,[["render",go],["__scopeId","data-v-468d52db"]]);var ko=vo;const bo={class:"container mt-5"};function fo(e,t,s,r,a,n){const i=(0,o.g2)("PaymentForm");return(0,o.uX)(),(0,o.CE)("div",bo,[t[0]||(t[0]=(0,o.Lk)("h1",{class:"mb-4"},"Test Payment Integration",-1)),(0,o.bF)(i,{onPaymentSuccess:n.handlePaymentSuccess},null,8,["onPaymentSuccess"])])}const Lo={class:"payment-container"},wo={class:"card"},Eo={class:"card-body"},_o={class:"mb-3"},Po={class:"input-group"},So=["disabled"],Co={key:0,id:"card-errors",class:"alert alert-danger",role:"alert"},Ao=["disabled"],Ro={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"};function jo(e,t,s,a,n,i){return(0,o.uX)(),(0,o.CE)("div",Lo,[(0,o.Lk)("div",wo,[(0,o.Lk)("div",Eo,[t[4]||(t[4]=(0,o.Lk)("h2",{class:"card-title mb-4"},"Payment Details",-1)),(0,o.Lk)("div",_o,[t[3]||(t[3]=(0,o.Lk)("label",{for:"amount",class:"form-label"},"Amount (SGD)",-1)),(0,o.Lk)("div",Po,[t[2]||(t[2]=(0,o.Lk)("span",{class:"input-group-text"},"$",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number",id:"amount","onUpdate:modelValue":t[0]||(t[0]=e=>n.amount=e),class:"form-control",min:"1",step:"0.01",disabled:n.processing},null,8,So),[[r.Jo,n.amount]])])]),t[5]||(t[5]=(0,o.Lk)("div",{id:"card-element",class:"form-control mb-3"},null,-1)),n.errorMessage?((0,o.uX)(),(0,o.CE)("div",Co,(0,l.v_)(n.errorMessage),1)):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.handlePayment&&i.handlePayment(...e)),class:"btn btn-primary w-100",disabled:n.processing},[n.processing?((0,o.uX)(),(0,o.CE)("span",Ro)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,l.v_)(n.processing?"Processing...":"Pay Now"),1)],8,Ao)])])])}var xo=s(7427);const Io=(0,xo.c)("pk_test_51R2ZQrJeAtLoMNXrh1LkazlDVgGu6L8hczwYoagQqlMsF09T7Ik6Bmnh6FQ3dP3eFodbia9LjaNCSJLkqAuaXdOU002wziPkG0");var Fo={name:"PaymentForm",data(){return{stripe:null,elements:null,card:null,amount:10,processing:!1,errorMessage:""}},async mounted(){try{this.stripe=await Io,this.elements=this.stripe.elements(),this.card=this.elements.create("card",{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}),this.card.mount("#card-element"),this.card.on("change",(e=>{this.errorMessage=e.error?e.error.message:""}))}catch(e){console.error("Error initializing Stripe:",e),this.errorMessage="Failed to initialize payment system. Please try again later."}},methods:{async handlePayment(){if(!this.amount||this.amount<=0)this.errorMessage="Please enter a valid amount";else{this.processing=!0,this.errorMessage="";try{console.log("Sending payment request...");const e=await Ct.A.post("http://127.0.0.1:5008/makepayment",{amount:Math.round(100*this.amount)}),{clientSecret:t}=e.data,s=await this.stripe.confirmCardPayment(t,{payment_method:{card:this.card}});s.error?this.errorMessage=s.error.message:(this.$emit("payment-success",s.paymentIntent),this.$router.push("/payment-success"))}catch(e){console.error("Payment error:",e),this.errorMessage=e.response?.data?.error||"An error occurred. Please try again."}finally{this.processing=!1}}}}};const To=(0,S.A)(Fo,[["render",jo],["__scopeId","data-v-9636e128"]]);var Jo=To,Do={name:"TestPayment",components:{PaymentForm:Jo},methods:{handlePaymentSuccess(e){console.log("Payment successful:",e)}}};const Mo=(0,S.A)(Do,[["render",fo]]);var No=Mo;const Uo={NODE_ENV:"production",VUE_APP_API_BASE_URL:"http://localhost:5004",VUE_APP_GOOGLE_MAPS_API_KEY:"INPUT YOUR GOOGLE MAPS API KEY HERE!!!!!!!",VUE_APP_PLAN_JOURNEY_API:"http://localhost:5031",VUE_APP_SAVED_ROUTES_URL:"http://localhost:5006",VUE_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51R2ZQrJeAtLoMNXrh1LkazlDVgGu6L8hczwYoagQqlMsF09T7Ik6Bmnh6FQ3dP3eFodbia9LjaNCSJLkqAuaXdOU002wziPkG0",BASE_URL:"/singapore-journey-planner/"}.VUE_APP_USER_API_URL||"http://localhost:5201";var Oo={namespaced:!0,state:{user:null,loading:!1,error:null},mutations:{SET_USER(e,t){e.user=t,t?localStorage.setItem("user",JSON.stringify(t)):localStorage.removeItem("user")},SET_LOADING(e,t){e.loading=t},SET_ERROR(e,t){e.error=t},CLEAR_ERROR(e){e.error=null}},actions:{async register({commit:e},t){e("SET_LOADING",!0),e("CLEAR_ERROR");try{const e=await Ct.A.post(`${Uo}/users`,{FullName:t.fullName,Email:t.email,Password:t.password,Phone:t.phone||null});if(201===e.data.code)return e.data.data;throw new Error(e.data.message||"Registration failed")}catch(s){const t=s.response?.data?.message||"Registration failed";throw e("SET_ERROR",t),new Error(t)}finally{e("SET_LOADING",!1)}},async login({commit:e},t){e("SET_LOADING",!0),e("CLEAR_ERROR");try{const s=await Ct.A.post(`${Uo}/authenticate`,{FullName:t.fullName,Password:t.password});if(200===s.data.code)return e("SET_USER",s.data.data),s.data.data;throw new Error(s.data.message||"Login failed")}catch(s){const t=s.response?.data?.message||s.message||"Login failed";throw e("SET_ERROR",t),new Error(t)}finally{e("SET_LOADING",!1)}},logout({commit:e}){e("SET_USER",null),localStorage.removeItem("user")},initAuth({commit:e,dispatch:t}){const s=localStorage.getItem("user");if(s)try{e("SET_USER",JSON.parse(s)),t("checkAuthState")}catch(r){console.error("Error parsing user data from localStorage:",r),localStorage.removeItem("user")}},async checkAuthState({commit:e,state:t}){if(t.user)try{const s=await Ct.A.get(`${Uo}/users/${t.user.UserId}`);200!==s.data.code&&e("SET_USER",null)}catch(s){e("SET_USER",null)}}},getters:{isAuthenticated(e){return!!e.user},user(e){return e.user},loading(e){return e.loading},error(e){return e.error}}},$o=(s(2489),{namespaced:!0,state:{savedJourneys:[],loading:!1,error:null},mutations:{SET_SAVED_JOURNEYS(e,t){e.savedJourneys=t},ADD_JOURNEY(e,t){e.savedJourneys.push(t)},REMOVE_JOURNEY(e,t){e.savedJourneys=e.savedJourneys.filter((e=>e.id!==t))},SET_LOADING(e,t){e.loading=t},SET_ERROR(e,t){e.error=t}},actions:{async fetchSavedJourneys({commit:e,rootState:t}){e("SET_LOADING",!0),e("SET_ERROR",null);try{const s=t.auth.user?.UserId;if(console.log("Current user state:",t.auth.user),console.log("Using user ID for routes:",s),!s)throw new Error("User ID not available. Please log in again.");const r=await It(s);if(200!==r.code)throw new Error(r.message||"Failed to fetch journeys");{const t=r.data?.routes||[],s=t.map((e=>({id:e.RouteID,startPoint:e.BusStopCode||"Unknown start",endPoint:e.BusID||"Unknown destination",transportMode:"Bus",travelTime:0,cost:0,savedAt:(new Date).toISOString(),routeName:`Route from ${e.BusStopCode} via ${e.BusID}`})));e("SET_SAVED_JOURNEYS",s)}}catch(s){console.error("Error in fetchSavedJourneys:",s),e("SET_ERROR",s.message||"Failed to fetch saved journeys"),e("SET_SAVED_JOURNEYS",[])}finally{e("SET_LOADING",!1)}},async saveJourney({commit:e,rootState:t},s){e("SET_LOADING",!0),e("SET_ERROR",null);try{const r=t.auth.user?.UserId;if(!r)throw new Error("User ID not available. Please log in again.");const o={user_id:r,route_name:s.routeName||`Journey to ${s.endPoint}`,route_data:s},a=await xt(o);if(201===a.code){const t={id:a.data.id,startPoint:s.startPoint,endPoint:s.endPoint,transportMode:s.transportMode,travelTime:s.travelTime,cost:s.cost,savedAt:a.data.created_at||(new Date).toISOString(),routeName:a.data.route_name};return e("ADD_JOURNEY",t),t}throw new Error(a.message||"Failed to save journey")}catch(r){throw console.error("Error in saveJourney:",r),e("SET_ERROR",r.message||"Failed to save journey"),r}finally{e("SET_LOADING",!1)}},async removeJourney({commit:e},t){e("SET_LOADING",!0),e("SET_ERROR",null);try{const s=await axios.delete(`http://localhost:5301/selectedroute/${t}`);if(200===s.data.code)return e("REMOVE_JOURNEY",t),!0;throw new Error(s.data.message||"Failed to remove journey")}catch(s){throw console.error("Error in removeJourney:",s),e("SET_ERROR",s.message||"Failed to remove journey"),s}finally{e("SET_LOADING",!1)}}},getters:{allSavedJourneys(e){return e.savedJourneys},loading(e){return e.loading},error(e){return e.error}}}),Xo=(0,_.y$)({modules:{auth:Oo,journeys:$o}});const Wo=[{path:"/",name:"Home",component:ae},{path:"/login",name:"Login",component:Se,meta:{requiresGuest:!0}},{path:"/register",name:"Register",component:He,meta:{requiresGuest:!0}},{path:"/journey-planner",name:"JourneyPlanner",component:Ts,meta:{requiresAuth:!0}},{path:"/saved-journeys",name:"SavedJourneys",component:cr,meta:{requiresAuth:!0}},{path:"/profile",name:"Profile",component:no,meta:{requiresAuth:!0}},{path:"/payment-success",name:"PaymentSuccess",component:ko,meta:{requiresAuth:!0}},{path:"/test-payment",name:"TestPayment",component:No,meta:{requiresAuth:!0}}],Bo=(0,U.aE)({history:(0,U.LA)("/singapore-journey-planner/"),routes:Wo});Bo.beforeEach(((e,t,s)=>{const r=Xo.getters["auth/isAuthenticated"];e.matched.some((e=>e.meta.requiresAuth))?r?s():s({path:"/login",query:{redirect:e.fullPath}}):e.matched.some((e=>e.meta.requiresGuest))&&r?s({path:"/journey-planner"}):s()}));var Vo=Bo,Qo=(s(8736),s(5246));s(7917);const Go={position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1};Xo.dispatch("auth/initAuth").then((()=>{const e=(0,r.Ef)(N);e.use(Vo),e.use(Xo),e.use(Qo.Ay,Go),e.mount("#app")}))}},t={};function s(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,s),a.exports}s.m=e,function(){var e=[];s.O=function(t,r,o,a){if(!r){var n=1/0;for(u=0;u<e.length;u++){r=e[u][0],o=e[u][1],a=e[u][2];for(var i=!0,l=0;l<r.length;l++)(!1&a||n>=a)&&Object.keys(s.O).every((function(e){return s.O[e](r[l])}))?r.splice(l--,1):(i=!1,a<n&&(n=a));if(i){e.splice(u--,1);var d=o();void 0!==d&&(t=d)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[r,o,a]}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p="/singapore-journey-planner/"}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,a,n=r[0],i=r[1],l=r[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(o in i)s.o(i,o)&&(s.m[o]=i[o]);if(l)var u=l(s)}for(t&&t(r);d<n.length;d++)a=n[d],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(u)},r=self["webpackChunksingapore_journey_planner"]=self["webpackChunksingapore_journey_planner"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[504],(function(){return s(9738)}));r=s.O(r)})();
//# sourceMappingURL=app.7eeb4434.js.map